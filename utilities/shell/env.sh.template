# ASTOCKARENA 环境变量配置
# 使用方法: source env.sh （或复制到 ~/.zshrc）

# ============ TinySoft 配置（必填）============
export TSL_USERNAME='your_tsl_username'
export TSL_PASSWORD='your_tsl_password'
export TSL_SERVER='tsl.tinysoft.com.cn'
export TSL_PORT='443'

# ============ Gemini API Key（必填）============
export GEMINI_API_KEY='your_gemini_api_key'

# ============ 前端是否使用Tinysoft ============
# export USE_LOCAL_DATA_ONLY=false

# ============ 多模型运行模式 ============
# 默认启用多进程隔离；如需还原同进程运行，注释掉此行
export PARALLEL_RUN=true

# ============ SharedPrefetchCoordinator（多模型共享预抓取） ============
# 锁等待超时（秒）。默认 15。设为 0 表示“无限等待”，可避免抢锁导致 fallback。
export SHARED_PREFETCH_LOCK_TIMEOUT=0
# 强制必须使用 shared prefetch：shared 失败就直接报错退出（不允许 fallback）
export REQUIRE_SHARED_PREFETCH=true

# ============ 可选：实时模式（到点才跑，不提前跑未来时点）===========
# wait: 提前启动，自动等待到 10:30/11:30/14:00 再分别执行
# stop: 只跑到“当前已到的时点”，遇到未来时点就退出（方便 cron 3 次触发）
export REALTIME_MODE=wait

# ============ 可选：日期范围配置 ============
# 如果设置，会覆盖 settings/default_config.json 中的日期
# export INIT_DATE='2025-11-13'
# export END_DATE='2025-11-13'

# ============ OpenAI / CloseAI 代理配置 ============
# CloseAI / 其他 OpenAI 兼容代理必须带 /v1 后缀
# export OPENAI_API_KEY='sk-your-proxy-key'
# export OPENAI_API_BASE='https://api.openai-proxy.org/v1'

# ============ DashScope / Qwen（可选） ============
# export QWEN_API_KEY='sk-your-dashscope-key'
# export DASHSCOPE_API_KEY='sk-your-dashscope-key'
# export QWEN_API_BASE='https://dashscope.aliyuncs.com/compatible-mode/v1'

echo "✓ Environment variables loaded"
echo "  TSL_USERNAME: ${TSL_USERNAME:0:3}***"
echo "  GEMINI_API_KEY: ${GEMINI_API_KEY:0:10}***"
echo "  QWEN_API_KEY: ${QWEN_API_KEY:0:10}***"
